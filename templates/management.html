<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Management</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f4f4f4;
    }
    .section-title {
      font-size: 20px;
      font-weight: bold;
      margin-top: 20px;
    }
    .btn-section {
      margin-bottom: 15px;
    }
  </style>
</head>
<body>
<div class="container py-4">
  <h2 class="text-primary mb-4">Management</h2>

  <!-- Sales Section -->
  <div class="section-title text-success">Sales</div>
  <div class="btn-section">
    <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#newEnquiryModal">New Enquiry</button>
    <a href="/progress-award" class="btn btn-outline-secondary">Progress / Award Status</a>
  </div>

  <!-- Production Section -->
  <div class="section-title text-warning">Production</div>
  <div class="btn-section">
    <a href="/new-project" class="btn btn-outline-primary">New Project</a>
  </div>

  <!-- Accounts Section -->
  <div class="section-title text-danger">Accounts</div>
  <div class="btn-section">
    <a href="/dc-invoice" class="btn btn-outline-primary">DC / Invoice</a>
    <a href="/mrs-sheet" class="btn btn-outline-secondary">MRS Sheet</a>
    <a href="/consolidated-report" class="btn btn-outline-success">Consolidated Report</a>
  </div>

  <!-- Employee Section -->
  <div class="section-title text-info">Employee</div>
  <div class="btn-section">
    <a href="/employee-production" class="btn btn-outline-primary">Production</a>
  </div>

  <!-- Raw Materials Section -->
  <div class="section-title text-dark">Raw Materials</div>
  <div class="btn-section">
    <a href="/raw-coils" class="btn btn-outline-primary">Coils</a>
    <a href="/raw-bolts" class="btn btn-outline-secondary">Bolts</a>
    <a href="/raw-gaskets" class="btn btn-outline-warning">Gaskets</a>
    <a href="/raw-reports" class="btn btn-outline-success">Reports</a>
  </div>
</div>

<!-- New Enquiry Modal -->
<div class="modal fade" id="newEnquiryModal" tabindex="-1" aria-labelledby="newEnquiryModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="newEnquiryModalLabel">New Enquiry</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="newEnquiryFormContainer">
        <!-- Form content will load via AJAX -->
        <div class="text-center py-5">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap & AJAX Script -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  const modal = document.getElementById('newEnquiryModal');
  modal.addEventListener('show.bs.modal', function () {
    const container = document.getElementById('newEnquiryFormContainer');
    container.innerHTML = '<div class="text-center py-5"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>';
    fetch('/new-enquiry')
      .then(response => response.text())
      .then(html => {
        container.innerHTML = html;
      })
      .catch(error => {
        container.innerHTML = "<p class='text-danger'>Failed to load form.</p>";
      });
  });
});
</script>
</body>
</html>
