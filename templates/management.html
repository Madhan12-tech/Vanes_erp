<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Management</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body class="bg-light">
  <div class="container mt-4">
    <h2>Management</h2>
    <hr>

    <div class="list-group">
      <a href="#" class="list-group-item list-group-item-action" data-bs-toggle="modal" data-bs-target="#newEnquiryModal">â• New Enquiry</a>
      <a href="/progress-award" class="list-group-item list-group-item-action">ğŸ“ˆ Progress / Award</a>
      <a href="/new-project" class="list-group-item list-group-item-action">ğŸ—ï¸ New Project</a>
      <a href="/dc-invoice" class="list-group-item list-group-item-action">ğŸ“„ DC / Invoice</a>
      <a href="/mrs-sheet" class="list-group-item list-group-item-action">ğŸ“‹ MRS Sheet</a>
      <a href="/consolidated-report" class="list-group-item list-group-item-action">ğŸ“Š Consolidated Reports</a>
      <a href="/employee-production" class="list-group-item list-group-item-action">ğŸ‘· Employee Production</a>
      <a href="/raw-coils" class="list-group-item list-group-item-action">ğŸŒ€ Coils</a>
      <a href="/raw-bolts" class="list-group-item list-group-item-action">ğŸ”© Bolts</a>
      <a href="/raw-gaskets" class="list-group-item list-group-item-action">ğŸ§· Gaskets</a>
      <a href="/raw-reports" class="list-group-item list-group-item-action">ğŸ“‘ Raw Material Reports</a>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="newEnquiryModal" tabindex="-1" aria-labelledby="newEnquiryModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <form id="newEnquiryForm" class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="newEnquiryModalLabel">New Enquiry</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">Enquiry ID</label>
            <input type="text" class="form-control" id="enquiry_id" name="enquiry_id" readonly>
          </div>
          <div class="mb-3">
            <label class="form-label">Enquiry Type</label>
            <select class="form-select" name="enquiry_type" required>
              <option value="">-- Select --</option>
              <option value="Tender">Tender</option>
              <option value="Enquiry">Enquiry</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">Contractor Type</label>
            <select class="form-select" name="contractor_type" required>
              <option value="">-- Select --</option>
              <option value="Main Contractor">Main Contractor</option>
              <option value="Sub Contractor">Sub Contractor</option>
              <option value="Other">Other</option>
            </select>
          </div>
          <!-- Add more fields here -->
        </div>
        <div class="modal-footer">
          <button type="reset" class="btn btn-secondary">Reset</button>
          <button type="submit" class="btn btn-primary">Submit</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    $(document).ready(function () {
      $('#newEnquiryModal').on('show.bs.modal', function () {
        $.get('/get_enquiry_id', function (data) {
          $('#enquiry_id').val(data.enquiry_id);
        });
      });

      $('#newEnquiryForm').submit(function (e) {
        e.preventDefault();
        $.post('/submit_enquiry', $(this).serialize(), function (response) {
          alert(response.message);
          $('#newEnquiryModal').modal('hide');
          $('#newEnquiryForm')[0].reset();
        });
      });
    });
  </script>
</body>
</html>
