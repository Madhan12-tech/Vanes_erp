<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Edit Vendor - Vanes ERP</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-4">
  <h3 class="mb-3">Edit Vendor - {{ vendor[1] }}</h3>

  <form method="POST">
    <!-- Vendor Details -->
    <div class="card mb-4">
      <div class="card-header bg-primary text-white">Vendor Details</div>
      <div class="card-body row g-3">
        <div class="col-md-6">
          <label class="form-label">Vendor ID</label>
          <input type="text" name="vendor_id" class="form-control" value="{{ vendor[1] }}" required>
        </div>
        <div class="col-md-6">
          <label class="form-label">Company Name</label>
          <input type="text" name="company_name" class="form-control" value="{{ vendor[2] }}" required>
        </div>
        <div class="col-md-12">
          <label class="form-label">Company Address</label>
          <input type="text" name="company_address" class="form-control" value="{{ vendor[3] }}" required>
        </div>
        <div class="col-md-6">
          <label class="form-label">Office Mobile</label>
          <input type="text" name="office_mobile" class="form-control" value="{{ vendor[4] }}">
        </div>
        <div class="col-md-6">
          <label class="form-label">Office Telephone</label>
          <input type="text" name="office_telephone" class="form-control" value="{{ vendor[5] }}">
        </div>
        <div class="col-md-6">
          <label class="form-label">Email</label>
          <input type="email" name="email" class="form-control" value="{{ vendor[6] }}">
        </div>
        <div class="col-md-6">
          <label class="form-label">GSTIN</label>
          <input type="text" name="gstin" class="form-control" value="{{ vendor[7] }}">
        </div>
        <div class="col-md-6">
          <label class="form-label">PAN</label>
          <input type="text" name="pan" class="form-control" value="{{ vendor[8] }}">
        </div>
        <div class="col-md-6">
          <label class="form-label">TAN</label>
          <input type="text" name="tan" class="form-control" value="{{ vendor[9] }}">
        </div>
      </div>
    </div>

    <!-- Communication Details -->
    <div class="card mb-4">
      <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
        Communication Details
        <button type="button" class="btn btn-sm btn-light" onclick="addRow()">+ Add Row</button>
      </div>
      <div class="card-body" id="contact-rows">
        {% for contact in contacts %}
        <div class="row g-2 mb-2 contact-row">
          <input type="hidden" name="contact_id[]" value="{{ contact[0] }}">
          <div class="col"><input type="text" name="contact_name[]" value="{{ contact[2] }}" class="form-control" placeholder="Name"></div>
          <div class="col"><input type="text" name="contact_dept[]" value="{{ contact[3] }}" class="form-control" placeholder="Department"></div>
          <div class="col"><input type="text" name="contact_desg[]" value="{{ contact[4] }}" class="form-control" placeholder="Designation"></div>
          <div class="col"><input type="text" name="contact_mob[]" value="{{ contact[5] }}" class="form-control" placeholder="Mobile"></div>
          <div class="col-auto">
            <button type="button" class="btn btn-danger btn-sm" onclick="removeRow(this)">−</button>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>

    <!-- Bank Details -->
    <div class="card mb-4">
      <div class="card-header bg-success text-white">Bank Details</div>
      <div class="card-body row g-3">
        <div class="col-md-6">
          <label class="form-label">Beneficiary Name</label>
          <input type="text" name="ben_name" class="form-control" value="{{ vendor[10] }}">
        </div>
        <div class="col-md-6">
          <label class="form-label">Account Number</label>
          <input type="text" name="ben_ac" class="form-control" value="{{ vendor[11] }}">
        </div>
        <div class="col-md-4">
          <label class="form-label">Account Type</label>
          <input type="text" name="ac_type" class="form-control" value="{{ vendor[12] }}">
        </div>
        <div class="col-md-4">
          <label class="form-label">Bank Name</label>
          <input type="text" name="bank_name" class="form-control" value="{{ vendor[13] }}">
        </div>
        <div class="col-md-2">
          <label class="form-label">IFSC</label>
          <input type="text" name="ifsc" class="form-control" value="{{ vendor[14] }}">
        </div>
        <div class="col-md-2">
          <label class="form-label">MICR</label>
          <input type="text" name="micr" class="form-control" value="{{ vendor[15] }}">
        </div>
      </div>
    </div>

    <button type="submit" class="btn btn-primary">Update Vendor</button>
    <a href="{{ url_for('vendors') }}" class="btn btn-secondary ms-2">Cancel</a>
  </form>
</div>

<script>
  function addRow() {
    const row = document.createElement('div');
    row.className = 'row g-2 mb-2 contact-row';
    row.innerHTML = `
      <input type="hidden" name="contact_id[]" value="">
      <div class="col"><input type="text" name="contact_name[]" class="form-control" placeholder="Name"></div>
      <div class="col"><input type="text" name="contact_dept[]" class="form-control" placeholder="Department"></div>
      <div class="col"><input type="text" name="contact_desg[]" class="form-control" placeholder="Designation"></div>
      <div class="col"><input type="text" name="contact_mob[]" class="form-control" placeholder="Mobile"></div>
      <div class="col-auto">
        <button type="button" class="btn btn-danger btn-sm" onclick="removeRow(this)">−</button>
      </div>
    `;
    document.getElementById('contact-rows').appendChild(row);
  }

  function removeRow(button) {
    button.closest('.contact-row').remove();
  }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
